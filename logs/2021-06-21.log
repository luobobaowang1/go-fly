time="2021-06-21 21:33:10" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:33:10" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:936.462194msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:33:10" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"新访客\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:33:10" level=info msg="| 404 |         188ns |       127.0.0.1 | GET | /favicon.ico |"
time="2021-06-21 21:33:10" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.4281msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:33:10" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:397.284414msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:33:10" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:937.304635msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:33:10" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"新访客\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:33:10" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:695.527899msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:33:10.742926 +0800 CST m=+88043.498491078 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:33:14" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9813.392347msSELECT message.*,visitor.avator visitor_avator,visitor.name visitor_name,user.avator kefu_avator,user.nickname kefu_name FROM `message` left join user on message.kefu_id=user.name left join visitor on visitor.visitor_id=message.visitor_id WHERE `message`.`deleted_at` IS NULL AND ((message.visitor_id= ?)) ORDER BY message.id asc[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:33:14" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3913.973063msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:33:14" level=info msg="| 200 |   13.573075ms |       127.0.0.1 | GET | /messages?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:33:14" level=info msg="| 200 |   14.237276ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:33:14" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:536.154004msUPDATE `message` SET `status` = ?, `updated_at` = ?  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?))[read 2021-06-21 21:33:14.131802 +0800 CST m=+88046.887370539 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:33:17" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2611.26368msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:33:17" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:575.479956msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:33:17" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.45458msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:33:17" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.692016msset names utf8mb4[] 0"
time="2021-06-21 21:33:17" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:407.13261msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:33:17.990067 +0800 CST m=+88050.745638933 2021-06-21 21:33:17.984553 +0800 CST m=+88050.740124882 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 http kefu unread] 1"
time="2021-06-21 21:33:18" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:33:18\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"http\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:33:18" level=info msg="| 200 |   49.661609ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:33:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:645.690935msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:33:28" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2614.885777msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:33:28" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.95971msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:33:28" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.725028msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:33:28" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.951109msset names utf8mb4[] 0"
time="2021-06-21 21:33:28" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:406.29699msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:33:28.053638 +0800 CST m=+88060.809219130 2021-06-21 21:33:28.050565 +0800 CST m=+88060.806146212 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 http://baidu.com kefu unread] 1"
time="2021-06-21 21:33:28" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:33:28\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"http://baidu.com\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:33:28" level=info msg="| 200 |   48.586642ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:34:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:646.552099msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:35:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7013.27628msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:35:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7814.013068msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[2] 1"
time="2021-06-21 21:35:05" level=info msg="| 200 |   27.885655ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:35:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:645.84398msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:36:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:645.538016msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:36:59" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2611.692305msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:36:59" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:5712.702344msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:36:59" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.955973msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:36:59" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.890559msset names utf8mb4[] 0"
time="2021-06-21 21:36:59" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:405.86382msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:36:59.467935 +0800 CST m=+88272.223708320 2021-06-21 21:36:59.464571 +0800 CST m=+88272.220344266 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 http://baidu.com kefu unread] 1"
time="2021-06-21 21:36:59" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:36:59\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"http://baidu.com\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:36:59" level=info msg="| 200 |   51.654145ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:37:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:705.941397msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:37:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:785.591081msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[3] 1"
time="2021-06-21 21:37:04" level=info msg="| 200 |   11.913889ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:37:15" level=info msg="| 404 |         216ns |       127.0.0.1 | GET | /favicon.ico |"
time="2021-06-21 21:37:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6412.693852msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:38:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:648.521779msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:39:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7013.272658msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:787.583522msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[3] 1"
time="2021-06-21 21:39:05" level=info msg="| 200 |   21.176466ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:39:26" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:648.859557msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:39:43" level=info msg="sql/Users/jisu/works/go-fly/models/configs.go:213.602916msSELECT * FROM `config`  [] 13"
time="2021-06-21 21:39:43" level=info msg="start server...\r\ngo：http://0.0.0.0:9090"
time="2021-06-21 21:39:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:647.517828msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:39:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:697.53237msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:39:43.577769 +0800 CST m=+0.076772201 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:6219.199192msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:265.800093msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.367144msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:695.631298msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:39:49.502255 +0800 CST m=+6.001263112 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9315.420239msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:49" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"http://baidu.com\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:39:49" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.630102msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:39:49" level=info msg="| 200 |    7.006307ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:24" level=info msg="| 200 |     790.721µs |       127.0.0.1 | GET | /chatIndex?kefu_id=kefu3 |"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.291862msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:40:24.771433 +0800 CST m=+41.270473759 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:24" level=info msg="send_kefu_message <nil> {\"type\":\"userOffline\",\"data\":{\"name\":\"本机地址本机地址网友\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\"}}"
time="2021-06-21 21:40:24" level=info msg="| 200 | 35.304403297s |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.544006msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/welcomes.go:518.263951msSELECT * FROM `welcome`  WHERE (user_id = ? and keyword=?)[kefu3 welcome] 2"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:578.52185msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:5710.958563msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:40:24" level=info msg="| 200 |   19.581118ms |       127.0.0.1 | GET | /notice?kefu_id=kefu3 |"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4225.420888msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:397.078264msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:437.385814msSELECT item_name,group_id FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:40:24" level=info msg="| 200 |   33.162535ms |       127.0.0.1 | GET | /autoreply?kefu_id=kefu3 |"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:826.222871msUPDATE `visitor` SET `avator` = ?, `client_ip` = ?, `name` = ?, `refer` = ?, `source_ip` = ?, `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[/static/images/13.jpg 127.0.0.1 本机地址本机地址网友 直接访问 127.0.0.1 1 2021-06-21 21:40:24.934053 +0800 CST m=+41.433093794 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:24" level=info msg="| 200 |   44.359297ms |       127.0.0.1 | POST | /visitor_login |"
time="2021-06-21 21:40:24" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:936.617486msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:24" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"http://baidu.com\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3912.226293msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:24" level=info msg="| 200 |   12.529778ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:24" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:269.536363msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:40:25" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.408768msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:25" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:938.403705msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:25" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"http://baidu.com\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:25" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:698.573226msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:40:25.007241 +0800 CST m=+41.506281435 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:40:25" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.354854msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:25" level=info msg="| 200 |    7.008335ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:30" level=info msg="| 200 |      83.657µs |       127.0.0.1 | GET | /chatIndex?kefu_id=kefu3 |"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.043518msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:40:30.071402 +0800 CST m=+46.570447132 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:269.461796msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/welcomes.go:518.71308msSELECT * FROM `welcome`  WHERE (user_id = ? and keyword=?)[kefu3 welcome] 2"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:577.606764msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:40:30" level=info msg="| 200 |   16.530173ms |       127.0.0.1 | GET | /notice?kefu_id=kefu3 |"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.689767msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4221.999447msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:399.26866msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="send_kefu_message <nil> {\"type\":\"userOffline\",\"data\":{\"name\":\"本机地址本机地址网友\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\"}}"
time="2021-06-21 21:40:30" level=info msg="| 200 |  5.250231167s |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4311.788551msSELECT item_name,group_id FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:40:30" level=info msg="| 200 |   34.010442ms |       127.0.0.1 | GET | /autoreply?kefu_id=kefu3 |"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:826.081332msUPDATE `visitor` SET `avator` = ?, `client_ip` = ?, `name` = ?, `refer` = ?, `source_ip` = ?, `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[/static/images/13.jpg 127.0.0.1 本机地址本机地址网友 直接访问 127.0.0.1 1 2021-06-21 21:40:30.240638 +0800 CST m=+46.739683172 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="| 200 |   44.077578ms |       127.0.0.1 | POST | /visitor_login |"
time="2021-06-21 21:40:30" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9310.683676msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"http://baidu.com\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:397.137752msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="| 200 |    7.504431ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2612.290351msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.793403msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:937.114703msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"http://baidu.com\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:695.93916msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:40:30.309902 +0800 CST m=+46.808947890 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:40:30" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.267768msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:30" level=info msg="| 200 |    6.664806ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:40:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:645.493558msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:40:55" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2615.705265msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:40:55" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.282211msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:40:55" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.563724msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:40:55" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.767279msset names utf8mb4[] 0"
time="2021-06-21 21:40:55" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:406.110356msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:40:55.503359 +0800 CST m=+72.002427431 2021-06-21 21:40:55.500204 +0800 CST m=+71.999272304 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 aaa kefu unread] 1"
time="2021-06-21 21:40:55" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:40:55\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"aaa\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:40:55" level=info msg="| 200 |   46.363857ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:41:03" level=info msg="| 404 |         144ns |       127.0.0.1 | GET | /baidu.com |"
time="2021-06-21 21:41:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:705.394127msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:41:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:785.205906msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[4] 1"
time="2021-06-21 21:41:04" level=info msg="| 200 |   10.974121ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:41:18" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.119888msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:41:18" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:578.296897msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:41:18" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.563461msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:41:18" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:313.571675msset names utf8mb4[] 0"
time="2021-06-21 21:41:18" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:407.128895msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:41:18.876048 +0800 CST m=+95.375137510 2021-06-21 21:41:18.873075 +0800 CST m=+95.372165148 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 看大街上看到后 kefu unread] 1"
time="2021-06-21 21:41:18" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:41:18\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"看大街上看到后\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:41:18" level=info msg="| 200 |   41.122434ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:41:18" level=info msg="| 404 |         139ns |       127.0.0.1 | GET | /favicon.ico |"
time="2021-06-21 21:41:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:646.410371msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:42:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6413.292408msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:43:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:705.601378msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:43:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:787.111821msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[5] 1"
time="2021-06-21 21:43:04" level=info msg="| 200 |   13.072616ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:43:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:647.427907msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:44:43" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6413.44558msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:45:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:706.365549msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:787.203014msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[5] 1"
time="2021-06-21 21:45:05" level=info msg="| 200 |   13.927698ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/configs.go:213.208248msSELECT * FROM `config`  [] 13"
time="2021-06-21 21:45:27" level=info msg="start server...\r\ngo：http://0.0.0.0:9090"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:646.066403msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.480041msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:45:27.489993 +0800 CST m=+0.078842539 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:626.858507msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:265.400004msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.543638msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:695.353355msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:45:27.847281 +0800 CST m=+0.436029784 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9317.500267msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:27" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"看大街上看到后\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:45:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.918853msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:27" level=info msg="| 200 |    9.273755ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:45:28" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2612.159855msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:45:28" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.605952msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:28" level=info msg="| 200 |  798.133064ms |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:45:28" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:939.163149msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:28" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"看大街上看到后\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:45:28" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:697.582214msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:45:28.635808 +0800 CST m=+1.224345501 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:28" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.485594msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:28" level=info msg="| 200 |    6.668712ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:45:40" level=info msg="| 200 |     751.418µs |       127.0.0.1 | GET | /chatIndex?kefu_id=kefu3 |"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:695.649353msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:45:40.034578 +0800 CST m=+12.621008491 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="send_kefu_message <nil> {\"type\":\"userOffline\",\"data\":{\"name\":\"本机地址本机地址网友\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\"}}"
time="2021-06-21 21:45:40" level=info msg="| 200 | 11.437696926s |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:268.797872msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/welcomes.go:518.077812msSELECT * FROM `welcome`  WHERE (user_id = ? and keyword=?)[kefu3 welcome] 2"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.138329msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:45:40" level=info msg="| 200 |   14.512991ms |       127.0.0.1 | GET | /notice?kefu_id=kefu3 |"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.555246msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4218.959645msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:437.204318msSELECT item_name,group_id FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:45:40" level=info msg="| 200 |   26.562555ms |       127.0.0.1 | GET | /autoreply?kefu_id=kefu3 |"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.116781msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:826.915734msUPDATE `visitor` SET `avator` = ?, `client_ip` = ?, `name` = ?, `refer` = ?, `source_ip` = ?, `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[/static/images/13.jpg 127.0.0.1 本机地址本机地址网友 直接访问 127.0.0.1 1 2021-06-21 21:45:40.190237 +0800 CST m=+12.776648674 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="| 200 |   45.865981ms |       127.0.0.1 | POST | /visitor_login |"
time="2021-06-21 21:45:40" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:938.276948msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"看大街上看到后\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.990326msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="| 200 |    6.340763ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:269.365299msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3911.450685msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:937.353453msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"看大街上看到后\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.396815msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:45:40.269751 +0800 CST m=+12.856152705 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:45:40" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3921.37828msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:45:40" level=info msg="| 200 |    21.61882ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:46:17" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2611.594362msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:46:17" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:5712.836096msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:46:17" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3929.924312msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:46:17" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:314.558141msset names utf8mb4[] 0"
time="2021-06-21 21:46:17" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:409.315284msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:46:17.061571 +0800 CST m=+49.646243532 2021-06-21 21:46:17.058087 +0800 CST m=+49.642759177 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg] kefu unread] 1"
time="2021-06-21 21:46:17" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:46:17\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:46:17" level=info msg="| 200 |  134.041063ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:46:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6412.125757msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:46:56" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.549479msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:46:56" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.113999msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:46:56" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.529119msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:46:56" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.883584msset names utf8mb4[] 0"
time="2021-06-21 21:46:56" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:405.709442msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:46:56.815909 +0800 CST m=+89.400422288 2021-06-21 21:46:56.812934 +0800 CST m=+89.397446945 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg] kefu unread] 1"
time="2021-06-21 21:46:56" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:46:56\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:46:56" level=info msg="| 200 |   38.224783ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:47:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7012.758907msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:47:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:785.915455msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[7] 1"
time="2021-06-21 21:47:04" level=info msg="| 200 |    19.22246ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:47:11" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:265.697278msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:47:11" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:575.396015msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:47:11" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.03571msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:47:11" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.65276msset names utf8mb4[] 0"
time="2021-06-21 21:47:11" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:407.558048msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:47:11.328785 +0800 CST m=+103.913291972 2021-06-21 21:47:11.322048 +0800 CST m=+103.906554154 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg] kefu unread] 1"
time="2021-06-21 21:47:11" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:47:11\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:47:11" level=info msg="| 200 |  219.745019ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:47:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6412.484665msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:48:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:647.730215msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:49:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:707.413489msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:49:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:786.163429msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[8] 1"
time="2021-06-21 21:49:04" level=info msg="| 200 |   13.929487ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:49:27" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6413.151099msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:49:58" level=info msg="sql/Users/jisu/works/go-fly/models/configs.go:214.000888msSELECT * FROM `config`  [] 13"
time="2021-06-21 21:49:58" level=info msg="start server...\r\ngo：http://0.0.0.0:9090"
time="2021-06-21 21:49:58" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:647.888984msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:49:58" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.342392msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:49:58.565115 +0800 CST m=+0.080505908 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:49:59" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:6218.540454msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:50:01" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2619.772032msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:50:01" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:397.288493msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:01" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.381657msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:50:01.291623 +0800 CST m=+2.807014272 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:01" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9318.031048msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:01" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:50:01" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.65221msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:01" level=info msg="| 200 |    8.969626ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:50:05" level=info msg="| 200 |     672.459µs |       127.0.0.1 | GET | /chatIndex?kefu_id=kefu3 |"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:697.234689msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:50:05.62299 +0800 CST m=+7.138382069 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="send_kefu_message <nil> {\"type\":\"userOffline\",\"data\":{\"name\":\"本机地址本机地址网友\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\"}}"
time="2021-06-21 21:50:05" level=info msg="| 200 |  4.375618176s |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:268.310354msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/welcomes.go:519.732821msSELECT * FROM `welcome`  WHERE (user_id = ? and keyword=?)[kefu3 welcome] 2"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:578.700725msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:576.657433msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:50:05" level=info msg="| 200 |   18.733151ms |       127.0.0.1 | GET | /notice?kefu_id=kefu3 |"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4227.868003msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:399.793358msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:436.0917msSELECT item_name,group_id FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:50:05" level=info msg="| 200 |   34.323066ms |       127.0.0.1 | GET | /autoreply?kefu_id=kefu3 |"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:825.654345msUPDATE `visitor` SET `avator` = ?, `client_ip` = ?, `name` = ?, `refer` = ?, `source_ip` = ?, `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[/static/images/13.jpg 127.0.0.1 本机地址本机地址网友 直接访问 127.0.0.1 1 2021-06-21 21:50:05.8009 +0800 CST m=+7.316291951 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="| 200 |   44.572644ms |       127.0.0.1 | POST | /visitor_login |"
time="2021-06-21 21:50:05" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:938.652966msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.730507msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="| 200 |    9.002083ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:265.968066msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.007928msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:938.270425msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:696.576922msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:50:05.866793 +0800 CST m=+7.382185005 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:50:05" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.243981msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:05" level=info msg="| 200 |    6.458378ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:50:45" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2613.18221msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:50:45" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:575.096318msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:50:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.393792msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:50:45" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.703577msset names utf8mb4[] 0"
time="2021-06-21 21:50:45" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:407.252098msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:50:45.134167 +0800 CST m=+46.649563501 2021-06-21 21:50:45.131141 +0800 CST m=+46.646537347 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 link[http://baidu.com] kefu unread] 1"
time="2021-06-21 21:50:45" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:50:45\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"link[http://baidu.com]\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:50:45" level=info msg="| 200 |   44.857013ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:50:58" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6424.305323msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:51:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7013.296206msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:51:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:786.33595msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[9] 1"
time="2021-06-21 21:51:04" level=info msg="| 200 |   20.019608ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:51:58" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:6413.032696msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:52:38" level=info msg="send_kefu_message <nil> {\"type\":\"inputing\",\"data\":{\"from\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"to\":\"kefu3\",\"content\":\"img[/static/upload/2021June/7407c4bbfc57cb7c7888af0e2fb787af.jpg]\"}}"
time="2021-06-21 21:52:46" level=info msg="send_kefu_message <nil> {\"type\":\"inputing\",\"data\":{\"from\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"to\":\"kefu3\",\"content\":\"\"}}"
time="2021-06-21 21:52:58" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:646.479277msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:53:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7011.398533msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:04" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:788.146117msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[9] 1"
time="2021-06-21 21:53:04" level=info msg="| 200 |    19.85188ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:53:42" level=info msg="sql/Users/jisu/works/go-fly/models/configs.go:212.873299msSELECT * FROM `config`  [] 13"
time="2021-06-21 21:53:42" level=info msg="start server...\r\ngo：http://0.0.0.0:9090"
time="2021-06-21 21:53:42" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:645.983444msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
time="2021-06-21 21:53:42" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:697.116392msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:53:42.593371 +0800 CST m=+0.065374989 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:44" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:6214.516119msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |     847.262µs |       127.0.0.1 | GET | /chatIndex?kefu_id=kefu3 |"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2612.464112msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.338436msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:938.034336msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"link[http://baidu.com]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:698.310111msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[0 2021-06-21 21:53:45.43487 +0800 CST m=+2.906874479 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="send_kefu_message <nil> {\"type\":\"userOffline\",\"data\":{\"name\":\"本机地址本机地址网友\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\"}}"
time="2021-06-21 21:53:45" level=info msg="| 200 |    45.72811ms |       127.0.0.1 | GET | /ws_visitor?visitor_id=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:698.779372msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:53:45.443181 +0800 CST m=+2.915185840 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3922.197227msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |   23.023048ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.463026msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:429.915993msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/welcomes.go:5110.784291msSELECT * FROM `welcome`  WHERE (user_id = ? and keyword=?)[kefu3 welcome] 2"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:5710.007636msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:4312.766958msSELECT item_name,group_id FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:5712.721253msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |    23.02803ms |       127.0.0.1 | GET | /autoreply?kefu_id=kefu3 |"
time="2021-06-21 21:53:45" level=info msg="| 200 |   23.832936ms |       127.0.0.1 | GET | /notice?kefu_id=kefu3 |"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:3910.462856msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:826.106318msUPDATE `visitor` SET `avator` = ?, `client_ip` = ?, `name` = ?, `refer` = ?, `source_ip` = ?, `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[/static/images/13.jpg 127.0.0.1 本机地址本机地址网友 直接访问 127.0.0.1 1 2021-06-21 21:53:45.547124 +0800 CST m=+3.019128831 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |   46.672648ms |       127.0.0.1 | POST | /visitor_login |"
time="2021-06-21 21:53:45" level=info msg="send_kefu_message <nil> {\"type\":\"notice\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"content\":\"本机地址本机地址网友来了\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:9310.520268msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"link[http://baidu.com]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:398.677673msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |    9.054571ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:266.722094msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:396.486133msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:939.962237msSELECT content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?)) ORDER BY id desc,`message`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="send_kefu_message <nil> {\"type\":\"userOnline\",\"data\":{\"avator\":\"/static/images/13.jpg\",\"last_message\":\"link[http://baidu.com]\",\"uid\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"username\":\"本机地址本机地址网友\"}}"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:697.849235msUPDATE `visitor` SET `status` = ?, `updated_at` = ?  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?))[1 2021-06-21 21:53:45.627334 +0800 CST m=+3.099338802 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 0"
time="2021-06-21 21:53:45" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.292453msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:53:45" level=info msg="| 200 |    5.558685ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:54:00" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:2611.28551msSELECT * FROM `ipblack`  WHERE (ip = ?) ORDER BY `ipblack`.`id` ASC LIMIT 1[127.0.0.1] 0"
time="2021-06-21 21:54:00" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:575.060814msSELECT * FROM `user`  WHERE `user`.`deleted_at` IS NULL AND ((name = ?)) ORDER BY `user`.`id` ASC LIMIT 1[kefu3] 1"
time="2021-06-21 21:54:00" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:395.631922msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:54:00" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:312.906089msset names utf8mb4[] 0"
time="2021-06-21 21:54:00" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:405.835351msINSERT INTO `message` (`created_at`,`updated_at`,`deleted_at`,`kefu_id`,`visitor_id`,`content`,`mes_type`,`status`) VALUES (?,?,?,?,?,?,?,?)[2021-06-21 21:54:00.042198 +0800 CST m=+17.514204549 2021-06-21 21:54:00.039141 +0800 CST m=+17.511147521 <nil> kefu3 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 link[http://baidu.com] kefu unread] 1"
time="2021-06-21 21:54:00" level=info msg="send_kefu_message <nil> {\"type\":\"message\",\"data\":{\"name\":\"中白菜\",\"avator\":\"/static/images/11.jpg\",\"id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"visitor_id\":\"\",\"group\":\"\",\"time\":\"2021-06-21 21:54:00\",\"to_id\":\"855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6\",\"content\":\"link[http://baidu.com]\",\"city\":\"\",\"client_ip\":\"\",\"refer\":\"\",\"is_kefu\":\"yes\"}}"
time="2021-06-21 21:54:00" level=info msg="| 200 |   40.332443ms |       127.0.0.1 | POST | /2/message |"
time="2021-06-21 21:54:20" level=info msg="| 200 |     365.277µs |       127.0.0.1 | GET | /main |"
time="2021-06-21 21:54:20" level=info msg="| 200 | 35.757532561s |       127.0.0.1 | GET | /ws_kefu?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVhdGVfdGltZSI6MTYyNDI4MjM4Mywia2VmdV9pZCI6MiwibmFtZSI6ImtlZnUzIiwicm9sZV9pZCI6MiwidHlwZSI6ImtlZnUifQ.CplerSk9WJXsOZ0RBZCJnYVQ5P7_sBxpFvL14w0IEVE |"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:7510.568577msSELECT user.avator,user.name,user.id, role.name role_name FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:54:20" level=info msg="| 200 |   10.773522ms |       127.0.0.1 | POST | /check_auth |"
time="2021-06-21 21:54:20" level=info msg="| 200 |    4.892141ms |       127.0.0.1 | GET | /chat_main |"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:268.429057msSELECT * FROM `reply_group`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/roles.go:179.816928msSELECT * FROM `role`  WHERE (id = ?) ORDER BY `role`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:708.795273msSELECT MAX(id) id FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( visitor_id in (? ))) GROUP BY visitor_id[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/replys.go:2710.59679msSELECT * FROM `reply_item`  WHERE (user_id = ?)[kefu3] 0"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:6210.583237msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:7810.494622msSELECT visitor_id,id,content FROM `message`  WHERE `message`.`deleted_at` IS NULL AND (( id in (? )))[10] 1"
time="2021-06-21 21:54:20" level=info msg="| 200 |   20.822137ms |       127.0.0.1 | GET | /kefuinfo |"
time="2021-06-21 21:54:20" level=info msg="| 200 |   19.425175ms |       127.0.0.1 | GET | /replys |"
time="2021-06-21 21:54:20" level=info msg="| 200 |   19.974856ms |       127.0.0.1 | GET | /visitors_kefu_online |"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/ipblacks.go:3120.930581msSELECT * FROM `ipblack`  WHERE (kefu_id = ?)[kefu3] 0"
time="2021-06-21 21:54:20" level=info msg="| 200 |   21.113557ms |       127.0.0.1 | GET | /ipblacks |"
time="2021-06-21 21:54:20" level=info msg="sql/Users/jisu/works/go-fly/models/users.go:627.753337msSELECT user.*,role.name role_name,role.id role_id FROM `user` join user_role on user.id=user_role.user_id join role on user_role.role_id=role.id WHERE `user`.`deleted_at` IS NULL AND ((user.id = ?)) ORDER BY `user`.`id` ASC LIMIT 1[2] 1"
time="2021-06-21 21:54:22" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:397.335598msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((visitor_id = ?)) ORDER BY `visitor`.`id` ASC LIMIT 1[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 1"
time="2021-06-21 21:54:22" level=info msg="| 200 |     7.64286ms |       127.0.0.1 | GET | /visitor?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:54:22" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:987.932707msSELECT message.*,visitor.avator visitor_avator,visitor.name visitor_name,user.avator kefu_avator,user.nickname kefu_name FROM `message` left join user on message.kefu_id=user.name left join visitor on visitor.visitor_id=message.visitor_id WHERE `message`.`deleted_at` IS NULL AND ((message.visitor_id= ?)) ORDER BY message.id asc[855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 10"
time="2021-06-21 21:54:22" level=info msg="| 200 |    8.282716ms |       127.0.0.1 | GET | /messages?visitorId=855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6 |"
time="2021-06-21 21:54:22" level=info msg="sql/Users/jisu/works/go-fly/models/messages.go:536.209569msUPDATE `message` SET `status` = ?, `updated_at` = ?  WHERE `message`.`deleted_at` IS NULL AND ((visitor_id=?))[read 2021-06-21 21:54:22.805 +0800 CST m=+40.277009101 855e1ec3-60b1-4f3a-af62-8bc85bf4e2b6] 10"
time="2021-06-21 21:54:42" level=info msg="sql/Users/jisu/works/go-fly/models/visitors.go:646.341367msSELECT * FROM `visitor`  WHERE `visitor`.`deleted_at` IS NULL AND ((status = ?))[1] 1"
